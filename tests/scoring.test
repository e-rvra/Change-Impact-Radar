import { describe, it, expect } from "vitest";
import { computeScores, Verdict } from "../src/scoring";

describe("scoring", () => {
  it("computes CSS-only when graph missing", () => {
    const prFiles = [
      { filename: "src/core/a.py", status: "modified", additions: 50, deletions: 10, changes: 60 },
      { filename: "tests/test_a.py", status: "modified", additions: 5, deletions: 1, changes: 6 }
    ];
    const res = computeScores({ prFiles, graph: null, maxDepth: 4, hotspotPaths: ["src/core"], debug: false });
    expect(res.CSS).toBeGreaterThan(0);
    expect(res.ImpactScore).toBeGreaterThanOrEqual(0);
    expect([Verdict.Low, Verdict.Medium, Verdict.High]).toContain(res.verdict);
  });
});
